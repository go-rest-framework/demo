"use strict";var App=new Struct({el:"#app",tmpl:"views/main",events:function(){Sidebar.render(),Content.render()}}),Sidebar=new Struct({el:"#mainwrap_sidebar",tmpl:'\n        <div id="userinfo"></div>\n        <div id="mainmenu"></div>\n    ',events:function(){Userinfo.data={username:localStorage.useremail,role:localStorage.userrole},Userinfo.render(),Mainmenu.render()}}),Content=new Struct({el:"#mainwrap_content",data:{page:"elements"},tmpl:'\n        <div id="sysmsgs"></div>\n        <div id="content"></div>\n    ',events:function(){"console"==this.data.page?Mainconsole.render():"users"==this.data.page?Users.rerender():"elements"==this.data.page&&Elements.render()}}),Userinfo=new Struct({el:"#userinfo",tmpl:"views/userinfo"}),Mainmenu=new Struct({el:"#mainmenu",tmpl:"views/main_menu",events:function(){new Navs(this.el.find(".navs")),$("#console_menu_btn").bind("click",function(){Content.data.page="console",Content.rerender()}),$("#users_menu_btn").bind("click",function(){Content.data.page="users",Content.rerender()}),$("#contents_menu_btn").bind("click",function(){Content.data.page="elements",Content.rerender()})}}),Mainconsole=new Struct({el:"#content",tmpl:"views/console",events:function(){ConsoleStats.render()}}),Users=new List({el:"#content",data:"/api/users",token:localStorage.usertoken,tmpl:"views/users/list_one",searchform:"views/users/search_form",events:function(){console.log(this.data)}}),Elements=new List({el:"#content",data:"/api/contentelements",tmpl:"\n        <h1>Elements</h1>\n    ",searchform:"views/elements/search_form",events:function(){var e=this;$("#add_element_btn").bind("click",function(){new Struct({el:"#add_element_worm_wrap",tmpl:"views/elements/form",events:function(){new Form({el:e.el.find("form"),event:function(){console.log(this.data)}})}}).render()})}}),Sysmsgs=new Struct({el:"#sysmsgs",tmpl:"views/sysmsgs"}),ConsoleStats=new Struct({el:"#console_stats",tmpl:"views/console_stats",data:[{name:"test1"},{name:"test1"},{name:"test1"},{name:"test1"},{name:"test1"},{name:"test1"}]}),loginformstruct=new Struct({el:"#app",tmpl:"views/login_form",events:function(){var e=new Form({el:$("#loginform"),event:function(){localStorage.clear(),localStorage.setItem("userid",e.data.ID),localStorage.setItem("useremail",e.data.email),localStorage.setItem("userrole",e.data.role),localStorage.setItem("usertoken",e.data.token),App.render()}})}});App.render();